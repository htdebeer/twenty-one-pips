<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Twenty-One-Pips: Dice Board</title>
    </head>
    <body>
        <h1>Dice Board</h1>

        <figure id="dice-board"></figure>

        <script type="module">
            import {DiceBoard} from "../src/dice_board/DiceBoard.js";
import {Player} from "../src/Player.js";

const NUMBER_OF_DICE = 10;
const diceBoardElement = document.querySelector("#dice-board");
const diceBoard = new DiceBoard({
    parent: diceBoardElement,
    width: 400,
    height: 400,
    dieSize: 100,
    dice: NUMBER_OF_DICE,
    background: "gold"
});

const PIPS_MAX = 6;
const MAX = NUMBER_OF_DICE * PIPS_MAX;
const WAIT = 1000;
const PLAYER = new Player({name: "dicey", color: "purple"});

let numberOfThrows = 1;
let sum = 0;

const throwUntilMax = () => {
    sum = diceBoard
        .dice
        .reduce((sum, die) => sum + die.pips, 0);

    console.log(`Throw ${numberOfThrows}:\t${sum}`);

    diceBoard
        .dice
        .filter(die => PIPS_MAX === die.pips)
        .forEach(die => die.holdIt(PLAYER));

    diceBoard.throwDice();

    numberOfThrows++;

    if (MAX !== sum) {
        setTimeout(throwUntilMax, WAIT);
    }
};

throwUntilMax();



        </script>
    </body>
</html>
